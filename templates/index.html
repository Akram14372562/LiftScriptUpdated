<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Manager - Random CVV Checker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Card Manager - Random CVV Checker</h1>
        </header>
        
        {% if error %}
        <div class="message error">{{ error|safe }}</div>
        {% endif %}
        
        {% if success %}
        <div class="message success">{{ success|safe }}</div>
        {% endif %}
        
        {% if warning %}
        <div class="message warning">{{ warning|safe }}</div>
        {% endif %}
        
        {% if show_refresh %}
        <form method="get">
            <input type="hidden" name="ol" value="{{ ol }}">
            <input type="submit" name="submit" value="Refresh_token" class="btn-primary">
        </form>
        {% endif %}

        {% if number %}
        <div class="account-info">
            <div>Account: [{{ ol }}/{{ count1 }}] {{ number }}</div>
            <div class="btn-group">
                <form method="get">
                    <input type="hidden" name="ol" value="{{ ol-1 }}">
                    <button type="submit" class="btn-secondary">Prev Account</button>
                </form>
                <form method="get">
                    <input type="hidden" name="ol" value="{{ ol+1 }}">
                    <button type="submit" class="btn-secondary">Next Account</button>
                </form>
            </div>
        </div>
        {% endif %}

        {% if cards %}
        <div class="card-list">
            <h3>Your Cards:</h3>
            {% for card in cards %}
            <div class="card-item">
                {% if card.index %}
                <strong>Card {{ card.index }}:</strong><br>
                {% endif %}
                **** **** **** {{ card.last_four }}<br>
                {{ card.type }} - {{ card.funding_type }}{{ card.product_code }}{{ card.is_default }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if not submit or submit == "Back To Dashboard" %}
        <!-- Single Card Form -->
        <form method="get" id="paymentForm">
            <h2>Single Card Processing</h2>
            
            <div class="proxy-toggle">
                <label class="switch">
                    <input type="checkbox" name="proxy_toggle" value="on">
                    <span class="slider"></span>
                </label>
                <span class="proxy-label">Use Proxy</span>
            </div>
            
            <div class="form-group">
                <label>Card Number:</label>
                <input type="text" id="cardNo" name="cardNo" placeholder="1234567890123456" required>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Exp Month:</label>
                    <select id="exp_month" name="exp_month" required>
                        <option value="">Month</option>
                        {% for i in range(1, 13) %}
                        <option value="{{ '%02d' % i }}">{{ '%02d' % i }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Exp Year:</label>
                    <select id="exp_year" name="exp_year" required>
                        <option value="">Year</option>
                        {% for year in range(2023, 2033) %}
                        <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>CVV:</label>
                    <input type="text" id="cvv" name="cvv" placeholder="123" required>
                </div>
                
                <div class="form-group">
                    <label>Zip Code:</label>
                    <input type="text" id="zipcode" name="zipcode" placeholder="zipcode" required>
                </div>
            </div>
            
            <input type="hidden" name="ol" value="{{ ol }}">
            <input type="submit" name="submit" value="Get_Tokens" class="btn-primary">
        </form>
        
        <hr>
        
        <!-- Sequential Processing Form -->
        <h2>Sequential Card Assignment</h2>
        <div class="message info">Each account will be assigned ONE card sequentially from your list</div>
        
        <form method="post" id="batchForm">
            <div class="proxy-toggle">
                <label class="switch">
                    <input type="checkbox" name="proxy_toggle" value="on">
                    <span class="slider"></span>
                </label>
                <span class="proxy-label">Use Proxy</span>
            </div>
            
            <div class="form-group">
                <label>Account Range:</label>
                <div class="form-row">
                    <div class="form-group">
                        <input type="number" id="start_account" name="start_account" placeholder="Start Account Index" min="0" max="{{ count1 }}" value="0" required>
                    </div>
                    <div class="form-group">
                        <input type="number" id="end_account" name="end_account" placeholder="End Account Index" min="0" max="{{ count1 }}" value="{{ count1 }}" required>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Card Details (One per line in format: cardNo|exp_month|exp_year|cvv|zipcode):</label>
                <textarea id="card_details" name="card_details" placeholder="1234567890123456|01|2025|123|90210&#10;5555555555554444|06|2026|456|10001" required></textarea>
            </div>
            
            <input type="hidden" name="ol" value="{{ ol }}">
            <div class="btn-group">
                <input type="submit" name="submit" value="Process_Sequential" class="btn-success">
                <input type="reset" value="Clear" class="btn-secondary">
            </div>
        </form>
        
        <hr>
        
        <!-- Random CVV Checker Form -->
        <h2>Random CVV Checker</h2>
        <div class="message warning">Tests each account with correct details first, then 5 random CVVs</div>
        
        <form method="post" id="cvvCheckerForm">
            <div class="proxy-toggle">
                <label class="switch">
                    <input type="checkbox" name="proxy_toggle" value="on">
                    <span class="slider"></span>
                </label>
                <span class="proxy-label">Use Proxy</span>
            </div>
            
            <div class="form-group">
                <label>Account Range:</label>
                <div class="form-row">
                    <div class="form-group">
                        <input type="number" id="cvv_start_account" name="cvv_start_account" placeholder="Start Account Index" min="0" max="{{ count1 }}" value="0" required>
                    </div>
                    <div class="form-group">
                        <input type="number" id="cvv_end_account" name="cvv_end_account" placeholder="End Account Index" min="0" max="{{ count1 }}" value="{{ count1 }}" required>
                    </div>
                </div>
            </div>
            
            <div class="form-group">
                <label>Card Details (One per line in format: cardNo|exp_month|exp_year|cvv|zipcode):</label>
                <textarea id="cvv_card_details" name="cvv_card_details" placeholder="1234567890123456|01|2025|123|90210&#10;5555555555554444|06|2026|456|10001" required></textarea>
            </div>
            
            <input type="hidden" name="ol" value="{{ ol }}">
            <div class="btn-group">
                <input type="submit" name="submit" value="Process_CVV_Checker" class="btn-warning">
                <input type="reset" value="Clear" class="btn-secondary">
            </div>
        </form>
        {% endif %}
    </div>
</body>
</html>